[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "GISProject",
    "section": "",
    "text": "This is the project website for AY2022-23 SMT201 G1 Group 2 and our project _________"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "Introduction",
    "section": "",
    "text": "Our project “Singapore Education Institutions Analysis”, aims to find the impact of closures or mergers of schools on the equity of access to education in Singapore.\nOur group chose to tackle this problem due to the competitiveness in primary school enrollment for schools in nearby neighborhoods. Since 2017, MOE started announcing school mergers and closures in waves every year, in order to improve “the quality of the school experience” due to declining birth rates leading to low-enrolment schools with insufficient class sizes. By merging these schools, MOE wants to maintain class sizes so schools can offer wider ranges of subjects, CCAs and programmes. Our group’s objective is to find if these school mergers and closures have resulted in certain estates and subzones getting left behind in terms of access to nearby schools as their schools have been shut down."
  },
  {
    "objectID": "intro.html#project-tasks",
    "href": "intro.html#project-tasks",
    "title": "Introduction",
    "section": "Project Tasks",
    "text": "Project Tasks\nThe project tasks are as follows:\n\nTo compile the necessary data:\n\nSingapore road network\nSingapore MRT network\n\nTo derive new data sets:\n\nLists of Schools and their Postal Codes before and after school mergers, closures and relocations\nList of Singapore subzones affected by school closures\nList of Singapore subzones with the greatest population of young people (18 & below) who will be attending these institutions currently/ in the future.\n\nTo perform Network Analysis on the locations of primary schools, secondary schools and junior colleges in Singapore before and after closures to find areas in Singapore disproportionately far away from primary, secondary and tertiary schools after the change.\nTo provide recommendations on new schools or new estate locations based on our findings, or give suggestions or guidelines on which schools to close instead in case of future exercises."
  },
  {
    "objectID": "intro.html#the-data",
    "href": "intro.html#the-data",
    "title": "Introduction",
    "section": "The Data",
    "text": "The Data\nThe following data sets will be used:\n\nSingapore School Locations from School Directory and Information on Data.gov.sg\nListing of all school location changes in Singapore from 2010 - elite.com.sg\nTrain Station Dataset - LTA Data Mall\nRoad data and MRT track data from Open Street Maps downloaded from GeoFabrik\nMaster Plan 2019 Subzone Boundary (No Sea) from Data.gov.sg\nSingapore Residents by Planning Area/Subzone, Single Year of Age and Sex, June 2011 - 2020 from Singstat.com"
  },
  {
    "objectID": "intro.html#project-timeline",
    "href": "intro.html#project-timeline",
    "title": "Introduction",
    "section": "Project Timeline",
    "text": "Project Timeline"
  },
  {
    "objectID": "methodology.html",
    "href": "methodology.html",
    "title": "Methodology - Step by Step Guide",
    "section": "",
    "text": "Firstly, you are required to download the following data from data.gov.sg:\n\nMaster Plan 2019 Subzone Boundary (No Sea)\nGeneral Information of Schools\nSingapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2011-2020\n\nNext, you are required to download geospatial data from geofabrik: \n\nRoads data from OpenStreetMap (OSM) data sets \n\nClick on Asia → Malaysia, Singapore, and Brunei → Download malaysia-singapore-brunei-latest-free.shp.zip \n\n\nNext, you are required to download MRT data (Train Station) from the Land Transport Authority (LTA) Data Mall. The data set provides the locations of MRT stations in Singapore. \n\n\n\nAssuming the root directory of this project is called GISProject, create a sub-folder called data.\n\nPlace the downloaded data from data.gov.sg and LTA Data Mall into the data sub-folder\n\nUnzip the respective zipped files,\nExtract the zipped files, and\nPlace them in data folder"
  },
  {
    "objectID": "methodology.html#data-preparation",
    "href": "methodology.html#data-preparation",
    "title": "Methodology - Step by Step Guide",
    "section": "4.1 Data Preparation",
    "text": "4.1 Data Preparation\n\n4.1.1 Data Cleaning\na. Clean School Directory and Information file downloaded from General Information of Schools by keeping the column like shown below, filtering the mainlevel_code with the value of SECONDARY and MIXED_LEVEL.\nb. Carefully check each school labelled with mixed_level, and remove schools that do not include secondary school, for example Singapore Sports School and School of the Arts, save it into the Data folder and name it Singapore_Secondary_Schools."
  },
  {
    "objectID": "methodology.html#preparing-base-layer-for-study-area-1",
    "href": "methodology.html#preparing-base-layer-for-study-area-1",
    "title": "Methodology - Step by Step Guide",
    "section": "2.0  Preparing base layer for study area",
    "text": "2.0  Preparing base layer for study area\n\nThe steps of preparing base layer which is MP19_Subzone and hexagon layer are demonstrated in previous section, the logic is same for analysing secondary school\n\n\n\n\n\nAccessibility Analysis for Junior Colleges\n\n\nData Used\nClean School Directory and Information file downloaded form General Information of Schools by keeping the column like shown below, filtering the mainlevel_code with the value of SECONDARY and MIXED_LEVEL"
  },
  {
    "objectID": "methodology.html#data-preparation-data-cleaning-and-qgis-project-setup-primary-school",
    "href": "methodology.html#data-preparation-data-cleaning-and-qgis-project-setup-primary-school",
    "title": "Methodology - Step by Step Guide",
    "section": "2.0 Data Preparation, Data Cleaning and QGIS Project Setup (Primary School)",
    "text": "2.0 Data Preparation, Data Cleaning and QGIS Project Setup (Primary School)\n\n2.1 Creating a New Project and Assigning Project Coordinate System for New Project\n\nFrom Windows Desktop, launch QGIS. \nYou will start a new QGIS project. From the menu bar, select Project → New. \nEnsure that your projection system at the bottom right bar is using EPSG:3414, if not reassign the projection system by selecting SVY21 / Singapore TM.\n\n\nNotice that the projection system has been updated to EPSG:3414 now.\n\n\n\n2.1.1 Saving your project\nIt is time to save the project. \n\nFrom the menu bar, click Project → Save. \nAt the Choose a QGIS project file dialog window, navigate to the root project folder, then provide a proper project name such as GISProject in QGIS files (.qgs) format from the Save as type: dropdown list. Your screen should look similar to the screenshot below.\n\n\n\n\n2.2 Preparing base layer for study area\nOur study area would be the Singapore Planning Subzone excluding all the outer islands  such as Pulau Ubin and Pulau Tekong.\n\nFrom the Browser panel, navigate to the path of GISProject as shown in the screenshot below. \n\n\n\nDouble click on URA_MP19_SUBZONE_NO_SEA_PL.shp Notice that URA_MP19_SUBZONE_NO_SEA_PL.shp is added in the Layer panel.  \nThe View window should look like this. \n\n\nWe will now select the main island of Singapore, excluding the outer islands. \n\nFrom the toolbar, click Select Features by Polygon\n\n\n\nSelect the main island of Singapore. Your screen should look similar to the screenshot below.\n\n\n\n\n2.3 Storing your data sets in GeoPackage format\n\nSave all your data sets into an integrated database called GISProject.\nFrom the Layers panel, right-click on URA_MP19_SUBZONE_NO_SEA_PL layer.\nSelect Export → Save Selected Features As from the context menu.\n\nThe Save Vector Layer dialog window appears. For Format, select GeoPackage from the drop-down list. \nFor Save as, click on the Browse button. The Save Layer As dialog window appears\nNavigate to \\GISProject\\Geopackage\\ sub-folder. \nFor File Name, type GISProject. \nRename your layer as MP19_SUBZONE. \nCheck that the CRS is Project CRS: EPSG:3414 – SVY21\n\n\n\nFrom the Layers panel, right click the URA_MP19_SUBZONE_NO_SEA_PL layer and click Remove Layer.\n\n\n2.4 Preparation of Primary School Layer\nReview the content of general-information-of-schools.csv file. Locate and open the file with Excel.\nYour screen should look like the figure below.\n\n\nUsing appropriate Excel functions to sort the schools according to the  mainlevel_code field, retain only the schools categorized as Primary. \n\nTake note that there are 3 Primary Schools: Catholic High School, CHIJ St. Nicholas Girls’  School and Maris Stella High School categorized as Mixed Levels under the mainlevel_code. \n\nUsing appropriate Excel function, retain the school_name, address,  postal_code, and mainlevel_code field and delete the unwanted fields. \nCreate two new fields: country and city fields\nFill the two fields with Singapore\nThe final general-information-of-schools.csv should look like this. Save the file.\n\n\n\n\n2.4.1 Geocoding Prepared Data\n\nGeocode the general-information-of-schools data set by using SLA OneMap API. Save the geocoded data set in  geocoded_school.csv. The geocoded data set should have the new fields Latitude and Longitude.\n\nThe geocoded_school.csv should look similar to this.\n\nNotice the first 4 entries do not have values under Latitude and Longitude.\n\nCollate the 4 primary schools without any values in the Latitude and Longitude fields and save them in not-foundschools.csv. \n\nCreate two new fields: country and city \nFill the cell below country and city fields with Singapore. \n\n\nThe final not-foundschools.csv should look similar to this. \n\n\n\n2.4.1.1 Installing the MMQGIS Plugin\nTo install the MMQGIS plugin, you will need to load the QGIS plugin repository by following the steps below.\n\nFrom the menu bar, select Plugins → Manage and Install Plugins.\n\nPlugins dialog window appears as shown below.\n\nNotice that there is a long list of plugins available. We can use the Search function to locate mmqgis plugin easily.\n\nAt Search, type mmqgis.\n\nYour screen should look similar to the figure below.\n\n\nClick on Install Plugin button to run the installer.\n\nAfter installing mmqgis plugin, remember to close the Plugin dialog window.\n\nClick on Close button.\n\n\n\n2.4.1.2 Geocoding using MMQGIS Plugin\nNow, you are ready geocode not-foundschools dataset.\n\nFrom the menu bar, select MMQGIS → Geocode → Geocode CSV with Web Service.\n\nWeb Service Geocode dialog window appears.\n\n\nFrom Input CSV File (UTF-8), click on Browse button.\n\nSelect a file dialog window appears.\n\nNavigate to the path where  not-foundschools.csv reside.\nClick on not-foundschools.csv.\nClick on Open button.\n\nYour screen should similar to the screenshot below.\n\n\nFor Web Service, select OpenStreetMap/Nominatim from the drop-down list.\n\nGeocode Tool will generate two output files. They are a point feature GIS data set along with a Not Found CSV file containing all rows that could not be geocoded (for whatever reason). We need to tell Geocode Tool where to keep these two output files.\n\nUse File Explorer to create a new sub-folder called geocoding in GISProject directory.\nFor Output File Name, click on Browse button.\n\nCreate or select a file dialog window appears.\n\nNavigate to the newly create geocoding sub-folder.\nFor File name, type geocoded_sch.shp\nClick on Save button.\n\nYou also need to provide the Not Found List Output list a place holder.\n\nFor Not Found Output list, click on Browse button.\n\nCreate or select a file dialog window appears.\n\nNavigate to the newly create geocoding sub-folder.\nFor File name, type not_found_sch.csv\nClick on Save button.\n\nThe completed dialog window should look similar to the screenshot below.\n\nNow, you are ready to perform the geocoding function.\n\nAt the Web Service Geocode dialog window, click on Apply button.\n\nWhen the geocoding function is completed, notice that a new shapefile layer will be added on QGIS map window. At the same time, the progress bar will indicate numbers of records that have been geocoded successfully.\n\nClick on the Close button to close the dialog window.\n\nAt the Layers panel, right-click on  geocoded_schs layer → Open Attribute Table\n\n\nExtract the values from the latlong field and fill in the missing Latitude and Longitude of the 3 primary schools in the geocoded_school.csv. \nThe final geocoded_school.csv should look similar to the screenshot below. Save the file as primary_schools.csv.\n\n\n\n\n2.4.2 Adding Primary School Layer into QGIS Project\nWe will now import the primary school csv into the project. \n\nClick Layer → Add Layer → Add Raster Layer.\n\n\nData Source Manager | Delimited Text dialog window appears. \n\nFor File name, navigate to the folder where the primary school csv resides\nFor Geometry Definition, click Point coordinates and ensure X field is set as Longitude and Y field is set as Latitude\nClick Add button.\nClick Close button.\n\n\nIn the Layers panel, notice that the primary_schools layer has been added. \n\n\n\n2.5 Preparation of Road Network Layer\nUsing the steps learned from the previous section, import the Road Network Data (gis_osm_roads_free_1.shp) into QGIS. The Road Network data contains road networks from Malaysia, Brunei and Singapore.\n\n\n2.5.1 Selecting all road networks within the study area\nUsing spatial query function of QGIS, extract the road network features that fall within Singapore mainland study area. \n\nFrom the icon bar, click on the drop-down list next to Selection icon\n\nSelect Select Features by Polygon from the drop-down list\n\n\n\n\nAt Browser panel, click on gis_osm_roads_free_1 to make sure that it is the active layer.\nClick and drape to form a freehand coloured shape to cover all the road network features that fall within Singapore mainland. \nNext, release the mouse and notice that all the selected features are highlighted.\n\n\n\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer all_road_networks.Your screen should look similar to the screenshot below.\n\n\nTo further filter the road network layer, we will exclude roads that are not walking or motor roads.\n\nUnder the Layers panel, right click on all_road_networks → Open Attribute Table\nClick on the Select features using an expression icon. The Select features by expression dialog window will appear.\nAt the upper left corner of the window, click on the Expression tab.\n\nUnder the expression pane, key in the following:\n\n\n“fclass” not in (‘bridleway’, ‘track’, ‘track_grade1’, ‘track_grade2’, ‘track_grade3’, ‘track_grade4’, ‘track_grade5’, ‘unclassified’, ‘unknown’)\nThe query statement in the Expression pane should look similar to this:\n\n\nClick on Select Features button and close the window.\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer all_roads.\n\n\n\n2.5.2 Extracting Motor Vehicle Road Network\n\nUnder the Layers panel, right click on all_roads → Open Attribute Table\nClick on the Select features using an expression icon. The Select features by expression dialog window will appear.\nAt the upper left corner of the window, click on the Expression tab.\n\nUnder the expression pane, key in the following:\n\n\n“fclass” = ‘motorway’ or “fclass” = ‘motorway_link’ or “fclass” = ‘primary’ or “fclass” = ‘primary_link’ or “fclass” = ‘secondary’ or “fclass” = ‘secondary_link’ or  “fclass” = ‘tertiary’ or “fclass” = ‘tertiary_link’ or “fclass” = ‘residential’ or  “fclass” = ‘trunk’ or “fclass” = ‘trunk_link’\nThe query statement in the Expression pane should look similar to this:\n\n\nClick on Select Features button and close the window.\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer motor_roads.The motor_roads layer should look similar to the screenshot below.\n\n\n\n\n2.5.3 Extracting Pedestrian Path Network\nUsing appropriate QGIS functions learnt from previous sections, extract the pedestrian path network from the all_road_networks layer.\n\nUnder the expression pane, key in the following:\n\n“fclass” = ‘residential’ or “fclass” = ‘living_street’ or “fclass” = ‘pedestrian’ or  “fclass” = ‘service’ or “fclass” = ‘cycleway’ or “fclass” = ‘footway’ or “fclass” = ‘path’ or  “fclass” = ‘steps’\n\n\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer walking_roads.The walking_roads layer should look similar to the screenshot below.\n\n\n2.6 Preparation of Young People Distribution Layer\nUsing the steps learned previously, import Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2011-2020 layer (respopagesex2011to2020) into the project. \n\n\n2.6.1 Extracting Youth Population\nWe will now use SQL to extract the distribution of the youth population from respopagesex2011to2020.\n\nClick Processing → Toolbox\nType Execute SQLinto the search bar.\nExecute SQL toolbox appears.\n\nFor Additional input datasources, select respopagesex2011to2020\nFor SQL query, type\n\n\nSelect “PA”, “SZ”, sum(“Pop”) as “Young People”  \nfrom respopagesex2011to2020 \nwhere “Time” = “2019” and “Age” in ('0','1','2','3','4','5','6','7','8','9','10',‘11’,‘12’,‘13’,‘14’,‘15’,‘16’,‘17’,‘18’,’) \ngroup by “PA”,“SZ”\n\nFor Geometry type, select No geometry\n\n\n\nClick Run button. \nA new layer called SQL Output will appear in the Layers panel.\n\n\n\n2.6.2 Creating Relational Join\nWe will now perform relational join between the SQL Output layer and the MP19_SUBZONE layer.We will use the subzone name as the unique identifier to join these two layers. \n\nRight-click on SQL Output → select Open Attribute Table. Observe that the SZ column values are currently in lower case. We will change the values to upper case.\nClick Open field calculator  icon\nClick Update existing field\nFor Value, select SZ\nUnder Expression panel, type upper(\"SZ\")\nClick OK button\n\n\nNotice that the SZ column values are now in upper case.\n\nUsing the steps learned previously, save SQL Output  into Geopackage format. Name the layer Young People Distribution.\nWe will now join the Young People Distribution layer and the MP19_SUBZONE layer. \n\nRight click on MP19_SUBZONE layer → click Properties → click Joins\nClick on the + icon at the bottom of the screen.\nThe Add Vector Join dialog window appears.\n\nFor Join layer, select Young People\nFor Join field, select SZ\nFor Target field, select SUBZONE_N\n\n\n\n\nClick OK button.\n\nNotice that a relational join between Young People and MP19_SUBZONE has been created.\n\n\n2.6.3 Creating Choropleth Map to Display Youth Population Distribution\nWe will now prepare the choropleth map to analyse the distribution of the youth population.\n\nFrom the Layers panel, right-click on MP19_SUBZONE layer → click Properties.\nThe Layer Properties dialog window appears. Click on Symbology tab\n\nAt Symbol selection drop-down list, select Graduated from the drop-down list\nFor Value, select Young_People_Distribution_Young_People\nFor Classes, keep it as 5\nFor Color ramp, choose Blues\nFor Mode, select Natural Breaks (Jenks) from the drop-down list\nClick Classify button\n\n\n\n\nClick the OK button.Notice that a choropleth map is now formed."
  },
  {
    "objectID": "methodology.html#preparing-maps-for-analysis",
    "href": "methodology.html#preparing-maps-for-analysis",
    "title": "Methodology - Step by Step Guide",
    "section": "3.0 Preparing Maps for Analysis",
    "text": "3.0 Preparing Maps for Analysis\n\n3.1 Creating the hexagon layer\nNow, we are going to create a hexagon layer by using the MP19_SUBZONE layer as the base. The hexagon distance is 250m.\n\nFrom the menu bar, select Vector → Research Tools → Create Grids.\n\nCreate Grids dialog window appears.\n\nFor Grid type: select Hexagon (Polygon) from the drop down list.\n\n\n\nFor Grid extend:, select Calculate from Layer →  MP19_SUBZONE\n\n\n\nFor Horizontal spacing, type 500.\nFor Vertical spacing, type 500.\n\n\n\nFor Grid CRS, make sure that EPSG 3414 is used.\n\nWhen you are ready to run the process,\n\nClick on Run button.\n\nRead the Log before closing the dialog window.\n\nClick on Close button.\n\nNotice that a new temporary layer called Grid is added on the Layer pane and display on Map window.\n\n\n\n3.1.1 Editing the hexagon layer\nUsing the Intersection function, intersect the Grid layer and MP19_SUBZONE layer.\nUsing Select features by polygon function as learnt in the previous section, select the area that falls under Singapore mainland. \n\nYour screen should look similar to the screenshot below.\n\n\n\n3.1.2 Saving the hexagon layer\nUsing the steps you had learned in previous sections, save the edited Grid layer into GeoPackage format. Name the layer hexagon.\nBefore you move on to the next section, remember to remove the temporary Grid layer.\n\n\n3.1.3  Computing hexagon centroid\nIn general, network analysis required the demand in a point feature. Hexagon, on the other hand, is a polygon feature. In order to meet the analysis need, we will compute the centroids of the hexagons.\n\nFrom the menu bar, select Vector → Geometry Tools → Centroids.\n\nCentroids dialog window appears.\n\nFor Input layer, select hexagon from the drop-down list.\n\nWhen you are ready to run the process,\n\nClick on Run button.\n\nReminder: Read the log before closing.\n\nClick on Close button.\n\nNotice that a new temporary layer called Centroids is added onto the Layers panel and display on Map view.\n\n\n\n3.1.4 Saving the centroid layer\nUsing the steps you had learned in previous hands-on exercise, save the temporary Centroids layer into GeoPackage format. Name the newly created layer hex_centroids .\nBefore you move on to the next section, remember to remove the temporary Centroids layer.\n\n\n3.2.2 Network Accessibility Analysis\n\n\n3.2.2.1 Install QNEAT Plugin\n\nFrom the menu bar, select Plugins → Manage and Install plugins. Plugins dialog window appears. \nAt the query, type QNEAT3. Notice that QNEAT3 appears on the search output list.\nClick on QNEAT3. \n\nClick on Install Plugin button. \n\n\nWhen the installation is completed, click on the Close button. \n\n\n3.2.2.2 Working with OD Matrix Tool\nNext, we will use the Origin-Destination Matrix (OD Matrix) tool of QNEAT3 plugin to calculate the distances between hexagon centrois (as the demand points) and primary schools (as the supply points).\n\nFrom the menu bar, click on Processing → Toolbox\nAt the Search pane, type OD Matrix.\n\nYour screen should look similar to the screenshot below.\n\n\nClick on OD Matrix Layers as Table (m:n).\n\nOD Matrix Layers as Table (m:n) dialog window appears.\n\nFor Network Layer, select motor_roads from the drop-down list.\nFor From-Point Layer, select hex_centroids from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select primary_schools from the drop-down list.\nFor Unique Point ID Field, select field_1 from the drop-down list.\nFor Optimization Criterion, select Shortest Path (distance optimization) from the drop-down list.\nFor Entry Cost calculation method, select Ellipsoidal from the drop-down list.\nFor Direction field, select oneway from the drop-down list.\nFor Value for forward direction, type F.\nFor Value for backward direction, type T.\nFor Value for both direction, type B.\nFor Topology tolerance, type 0.5 (i.e. 0.5 m).\n\nThe completed dialog window should look similar to the screenshot below.\n\nWhen you are ready to run the process.\n\nAt the OD Matrix dialog window, click on Run button.\n\nWhen you are ready to close the dialog window, click on the Close button.\nNotice that a new temporary table called Output OD Matrix is added onto Layers panel.\n\nAt the Layers panel, right-click on Output OD Matrix and select Open Attribute Table from the context menu.\n\nA data table that looks similar to the screenshot below appears.\n\n Using the steps learnt in previous sections, save the temporary Output OD Matrix table as GeoPackage format. Name the layer OD_primaryschools.\n\n\n2.2.2.3 Extracting shortest distance pairs\nNext, we will use the SQL tool of QGIS to select destination points with the shortest distance.\n\nAt the Search pane of Processing Toolbox, type SQL.\n\nSQL function appears on the list.\n\n\nDouble-click on Execute SQL of Vector general.\n\nExecute SQL dialog window appears.\n\nFor Additional input datasources, select on the button at the right end.\nClick on the checkbox Output OD Matrix.\n\n\n\nClick on OK button.\nAt SQL query panel, type the following SQL\n\n\n\nFor Geometry type, select No Geometry from the drop-down list.\n\n\nNotice that a temporary table called SQL Output is added onto Layers panel. It consists of four fields. The values in shortest_distance field are the shortest distance between demand points and its nearest primary school.\n\nUsing the steps you learnt in previous sections save the temporary SQL Output table as GeoPackage format. Name the layer acc_primaryschools.\n\n\n3.2.3 Mapping Accessibility Values\n\n\n3.2.3.1 Creating a Duplicate Layer\nBefore we getting started, let us create a duplicate copy of hexagon layer\n\nAt the Layers panel, right-click on hexagon layer and select Duplicate Layer from the context menu.\n\nA new layer called hexagon copy is added onto Layers panel.\n\nRename the layer to Accessibility to primary schools.\n\n\n\n3.2.3.2 Performing relational join\nBefore we can prepare the choropleth map, we need to join acc_primaryschools data table to the newly created  Accessibility to primary schools by using fid of acc_primaryschools data table and fid of Accessibility to primary schools attribute table as unique join fields.\n\nAt the Layer panel, right-click on Accessibility to primary schools layer and select Properties from the context menu.\n\nThe Properties dialog window appears.\n\nAt the option panel, click on Joins.\nClick on + button to add a join.\n\nThe Add Vector Join dialog window appears.\n\nFor Join layer, select acc_primaryschools from th drop-down list.\nFor Join field, select fid from the drop-down list.\nFor Target field, select fid from the drop-down lsit.\nKeep the checkbox in front of Cache join layer in memory checked.\n\n\n\nWhen you are ready, click on OK button.\n\n\n\n3.2.3.3 Preparing Choropleth Map\nPrepare a choropleth map to show the distribution of accessibility to primary schools.\n\nFrom the Layers panel, double-click on the Accessibility to primary schools layer. The Layer Properties dialog window appears. \nClick on the Symbology tab. \nAt Symbol selection drop-down list, select Graduated from the drop-down list.\nFor Value, select access_primaryschools_shortest_distance from the drop down list.\nFor Classes, keep it as 5.\n For Color ramp, choose Blues or any colour of your choice from the drop-down  list.\n\nSelect Invert Color Ramp\n\nFor Mode, choose Equal Count (Quantile) from the drop-down list.\nClick on the Classify button. \n\nYour screen should look similar to the screenshot below.\n\n\nYour choropleth map should look similar to the screenshot below."
  },
  {
    "objectID": "methodology.html#creating-a-new-project-and-assigning-project-coordinate-system-for-new-project",
    "href": "methodology.html#creating-a-new-project-and-assigning-project-coordinate-system-for-new-project",
    "title": "Methodology - Step by Step Guide",
    "section": "2.1 Creating a New Project and Assigning Project Coordinate System for New Project",
    "text": "2.1 Creating a New Project and Assigning Project Coordinate System for New Project\n\nFrom Windows Desktop, launch QGIS. \nYou will start a new QGIS project. From the menu bar, select Project → New. \nEnsure that your projection system at the bottom right bar is using EPSG:3414, if not reassign the projection system by selecting SVY21 / Singapore TM.\n\n\nNotice that the projection system has been updated to EPSG:3414 now.\n\n\n2.1.1 Saving your project\nIt is time to save the project. \n\nFrom the menu bar, click Project → Save. \nAt the Choose a QGIS project file dialog window, navigate to the root project folder, then provide a proper project name such as GISProject in QGIS files (.qgs) format from the Save as type: dropdown list. Your screen should look similar to the screenshot below."
  },
  {
    "objectID": "methodology.html#preparing-base-layer-for-study-area",
    "href": "methodology.html#preparing-base-layer-for-study-area",
    "title": "Methodology - Step by Step Guide",
    "section": "2.2 Preparing base layer for study area",
    "text": "2.2 Preparing base layer for study area\nOur study area would be the Singapore Planning Subzone excluding all the outer islands  such as Pulau Ubin and Pulau Tekong.\n\nFrom the Browser panel, navigate to the path of GISProject as shown in the screenshot below. \n\n\n\nDouble click on URA_MP19_SUBZONE_NO_SEA_PL.shp Notice that URA_MP19_SUBZONE_NO_SEA_PL.shp is added in the Layer panel.  \nThe View window should look like this. \n\n\nWe will now select the main island of Singapore, excluding the outer islands. \n\nFrom the toolbar, click Select Features by Polygon\n\n\n\nSelect the main island of Singapore. Your screen should look similar to the screenshot below."
  },
  {
    "objectID": "methodology.html#storing-your-data-sets-in-geopackage-format",
    "href": "methodology.html#storing-your-data-sets-in-geopackage-format",
    "title": "Methodology - Step by Step Guide",
    "section": "2.3 Storing your data sets in GeoPackage format",
    "text": "2.3 Storing your data sets in GeoPackage format\n\nSave all your data sets into an integrated database called GISProject.\nFrom the Layers panel, right-click on URA_MP19_SUBZONE_NO_SEA_PL layer.\nSelect Export → Save Selected Features As from the context menu.\n\nThe Save Vector Layer dialog window appears. For Format, select GeoPackage from the drop-down list. \nFor Save as, click on the Browse button. The Save Layer As dialog window appears\nNavigate to \\GISProject\\Geopackage\\ sub-folder. \nFor File Name, type GISProject. \nRename your layer as MP19_SUBZONE. \nCheck that the CRS is Project CRS: EPSG:3414 – SVY21\n\n\n\nFrom the Layers panel, right click the URA_MP19_SUBZONE_NO_SEA_PL layer and click Remove Layer."
  },
  {
    "objectID": "methodology.html#preparation-of-primary-school-layer",
    "href": "methodology.html#preparation-of-primary-school-layer",
    "title": "Methodology - Step by Step Guide",
    "section": "2.4 Preparation of Primary School Layer",
    "text": "2.4 Preparation of Primary School Layer\nReview the content of general-information-of-schools.csv file. Locate and open the file with Excel.\nYour screen should look like the figure below.\n\n\nUsing appropriate Excel functions to sort the schools according to the  mainlevel_code field, retain only the schools categorized as Primary. \n\nTake note that there are 3 Primary Schools: Catholic High School, CHIJ St. Nicholas Girls’  School and Maris Stella High School categorized as Mixed Levels under the mainlevel_code. \n\nUsing appropriate Excel function, retain the school_name, address,  postal_code, and mainlevel_code field and delete the unwanted fields. \nCreate two new fields: country and city fields\nFill the two fields with Singapore\nThe final general-information-of-schools.csv should look like this. Save the file.\n\n\n\n2.4.1 Geocoding Prepared Data\n\nGeocode the general-information-of-schools data set by using SLA OneMap API. Save the geocoded data set in  geocoded_school.csv. The geocoded data set should have the new fields Latitude and Longitude.\n\nThe geocoded_school.csv should look similar to this.\n\nNotice the first 4 entries do not have values under Latitude and Longitude.\n\nCollate the 4 primary schools without any values in the Latitude and Longitude fields and save them in not-foundschools.csv. \n\nCreate two new fields: country and city \nFill the cell below country and city fields with Singapore. \n\n\nThe final not-foundschools.csv should look similar to this. \n\n\n2.4.1.1 Installing the MMQGIS Plugin\nTo install the MMQGIS plugin, you will need to load the QGIS plugin repository by following the steps below.\n\nFrom the menu bar, select Plugins → Manage and Install Plugins.\n\nPlugins dialog window appears as shown below.\n\nNotice that there is a long list of plugins available. We can use the Search function to locate mmqgis plugin easily.\n\nAt Search, type mmqgis.\n\nYour screen should look similar to the figure below.\n\n\nClick on Install Plugin button to run the installer.\n\nAfter installing mmqgis plugin, remember to close the Plugin dialog window.\n\nClick on Close button.\n\n\n\n2.4.1.2 Geocoding using MMQGIS Plugin\nNow, you are ready geocode not-foundschools dataset.\n\nFrom the menu bar, select MMQGIS → Geocode → Geocode CSV with Web Service.\n\nWeb Service Geocode dialog window appears.\n\n\nFrom Input CSV File (UTF-8), click on Browse button.\n\nSelect a file dialog window appears.\n\nNavigate to the path where  not-foundschools.csv reside.\nClick on not-foundschools.csv.\nClick on Open button.\n\nYour screen should similar to the screenshot below.\n\n\nFor Web Service, select OpenStreetMap/Nominatim from the drop-down list.\n\nGeocode Tool will generate two output files. They are a point feature GIS data set along with a Not Found CSV file containing all rows that could not be geocoded (for whatever reason). We need to tell Geocode Tool where to keep these two output files.\n\nUse File Explorer to create a new sub-folder called geocoding in GISProject directory.\nFor Output File Name, click on Browse button.\n\nCreate or select a file dialog window appears.\n\nNavigate to the newly create geocoding sub-folder.\nFor File name, type geocoded_sch.shp\nClick on Save button.\n\nYou also need to provide the Not Found List Output list a place holder.\n\nFor Not Found Output list, click on Browse button.\n\nCreate or select a file dialog window appears.\n\nNavigate to the newly create geocoding sub-folder.\nFor File name, type not_found_sch.csv\nClick on Save button.\n\nThe completed dialog window should look similar to the screenshot below.\n\nNow, you are ready to perform the geocoding function.\n\nAt the Web Service Geocode dialog window, click on Apply button.\n\nWhen the geocoding function is completed, notice that a new shapefile layer will be added on QGIS map window. At the same time, the progress bar will indicate numbers of records that have been geocoded successfully.\n\nClick on the Close button to close the dialog window.\n\nAt the Layers panel, right-click on  geocoded_schs layer → Open Attribute Table\n\n\nExtract the values from the latlong field and fill in the missing Latitude and Longitude of the 3 primary schools in the geocoded_school.csv. \nThe final geocoded_school.csv should look similar to the screenshot below. Save the file as primary_schools.csv.\n\n\n\n\n\n2.4.2 Adding Primary School Layer into QGIS Project\nWe will now import the primary school csv into the project. \n\nClick Layer → Add Layer → Add Raster Layer.\n\n\nData Source Manager | Delimited Text dialog window appears. \n\nFor File name, navigate to the folder where the primary school csv resides\nFor Geometry Definition, click Point coordinates and ensure X field is set as Longitude and Y field is set as Latitude\nClick Add button.\nClick Close button.\n\n\nIn the Layers panel, notice that the primary_schools layer has been added."
  },
  {
    "objectID": "methodology.html#preparation-of-road-network-layer",
    "href": "methodology.html#preparation-of-road-network-layer",
    "title": "Methodology - Step by Step Guide",
    "section": "2.5 Preparation of Road Network Layer",
    "text": "2.5 Preparation of Road Network Layer\nUsing the steps learned from the previous section, import the Road Network Data (gis_osm_roads_free_1.shp) into QGIS. The Road Network data contains road networks from Malaysia, Brunei and Singapore.\n\n2.5.1 Selecting all road networks within the study area\nUsing spatial query function of QGIS, extract the road network features that fall within Singapore mainland study area. \n\nFrom the icon bar, click on the drop-down list next to Selection icon\n\nSelect Select Features by Polygon from the drop-down list\n\n\n\n\nAt Browser panel, click on gis_osm_roads_free_1 to make sure that it is the active layer.\nClick and drape to form a freehand coloured shape to cover all the road network features that fall within Singapore mainland. \nNext, release the mouse and notice that all the selected features are highlighted.\n\n\n\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer all_road_networks.Your screen should look similar to the screenshot below.\n\n\nTo further filter the road network layer, we will exclude roads that are not walking or motor roads.\n\nUnder the Layers panel, right click on all_road_networks → Open Attribute Table\nClick on the Select features using an expression icon. The Select features by expression dialog window will appear.\nAt the upper left corner of the window, click on the Expression tab.\n\nUnder the expression pane, key in the following:\n\n\n“fclass” not in (‘bridleway’, ‘track’, ‘track_grade1’, ‘track_grade2’, ‘track_grade3’, ‘track_grade4’, ‘track_grade5’, ‘unclassified’, ‘unknown’)\nThe query statement in the Expression pane should look similar to this:\n\n\nClick on Select Features button and close the window.\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer all_roads.\n\n\n\n2.5.2 Extracting Motor Vehicle Road Network\n\nUnder the Layers panel, right click on all_roads → Open Attribute Table\nClick on the Select features using an expression icon. The Select features by expression dialog window will appear.\nAt the upper left corner of the window, click on the Expression tab.\n\nUnder the expression pane, key in the following:\n\n\n“fclass” = ‘motorway’ or “fclass” = ‘motorway_link’ or “fclass” = ‘primary’ or “fclass” = ‘primary_link’ or “fclass” = ‘secondary’ or “fclass” = ‘secondary_link’ or  “fclass” = ‘tertiary’ or “fclass” = ‘tertiary_link’ or “fclass” = ‘residential’ or  “fclass” = ‘trunk’ or “fclass” = ‘trunk_link’\nThe query statement in the Expression pane should look similar to this:\n\n\nClick on Select Features button and close the window.\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer motor_roads.The motor_roads layer should look similar to the screenshot below.\n\n\n\n\n2.5.3 Extracting Pedestrian Path Network\nUsing appropriate QGIS functions learnt from previous sections, extract the pedestrian path network from the all_road_networks layer.\n\nUnder the expression pane, key in the following:\n\n“fclass” = ‘residential’ or “fclass” = ‘living_street’ or “fclass” = ‘pedestrian’ or  “fclass” = ‘service’ or “fclass” = ‘cycleway’ or “fclass” = ‘footway’ or “fclass” = ‘path’ or  “fclass” = ‘steps’\n\n\nUsing the steps learned from previous sections, save the selected features in GeoPackage format. Name the layer walking_roads.The walking_roads layer should look similar to the screenshot below."
  },
  {
    "objectID": "methodology.html#preparation-of-young-people-distribution-layer",
    "href": "methodology.html#preparation-of-young-people-distribution-layer",
    "title": "Methodology - Step by Step Guide",
    "section": "2.6 Preparation of Young People Distribution Layer",
    "text": "2.6 Preparation of Young People Distribution Layer\nUsing the steps learned previously, import Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2011-2020 layer (respopagesex2011to2020) into the project. \n\n2.6.1 Extracting Youth Population\nWe will now use SQL to extract the distribution of the youth population from respopagesex2011to2020.\n\nClick Processing → Toolbox\nType Execute SQLinto the search bar.\nExecute SQL toolbox appears.\n\nFor Additional input datasources, select respopagesex2011to2020\nFor SQL query, type\n\n\nSelect “PA”, “SZ”, sum(“Pop”) as “Young People”  \nfrom respopagesex2011to2020 \nwhere “Time” = “2019” and “Age” in ('0','1','2','3','4','5','6','7','8','9','10',‘11’,‘12’,‘13’,‘14’,‘15’,‘16’,‘17’,‘18’,’) \ngroup by “PA”,“SZ”\n\nFor Geometry type, select No geometry\n\n\n\n\nClick Run button. \nA new layer called SQL Output will appear in the Layers panel.\n\n\n\n2.6.2 Creating Relational Join\nWe will now perform relational join between the SQL Output layer and the MP19_SUBZONE layer.We will use the subzone name as the unique identifier to join these two layers. \n\nRight-click on SQL Output → select Open Attribute Table. Observe that the SZ column values are currently in lower case. We will change the values to upper case.\nClick Open field calculator icon\nClick Update existing field\nFor Value, select SZ\nUnder Expression panel, type upper(\"SZ\")\nClick OK button\n\n\nNotice that the SZ column values are now in upper case.\n\nUsing the steps learned previously, save SQL Output  into Geopackage format. Name the layer Young People Distribution.\nWe will now join the Young People Distribution layer and the MP19_SUBZONE layer. \n\nRight click on MP19_SUBZONE layer → click Properties → click Joins\nClick on the + icon at the bottom of the screen.\nThe Add Vector Join dialog window appears.\n\nFor Join layer, select Young People\nFor Join field, select SZ\nFor Target field, select SUBZONE_N\n\n\nClick OK button.\n\nNotice that a relational join between Young People and MP19_SUBZONE has been created.\n\n\n2.6.3 Creating Choropleth Map to Display Youth Population Distribution\nWe will now prepare the choropleth map to analyse the distribution of the youth population.\n\nFrom the Layers panel, right-click on MP19_SUBZONE layer → click Properties.\nThe Layer Properties dialog window appears. Click on Symbology tab\n\nAt Symbol selection drop-down list, select Graduated from the drop-down list\nFor Value, select Young_People_Distribution_Young_People\nFor Classes, keep it as 5\nFor Color ramp, choose Blues\nFor Mode, select Natural Breaks (Jenks) from the drop-down list\nClick Classify button\n\n\nClick the OK button.Notice that a choropleth map is now formed."
  },
  {
    "objectID": "methodology.html#creating-the-hexagon-layer",
    "href": "methodology.html#creating-the-hexagon-layer",
    "title": "Methodology - Step by Step Guide",
    "section": "3.1 Creating the hexagon layer",
    "text": "3.1 Creating the hexagon layer\nNow, we are going to create a hexagon layer by using the MP19_SUBZONE layer as the base. The hexagon distance is 250m.\n\nFrom the menu bar, select Vector → Research Tools → Create Grids.\n\nCreate Grids dialog window appears.\n\nFor Grid type: select Hexagon (Polygon) from the drop down list.\n\n\n\nFor Grid extend:, select Calculate from Layer →  MP19_SUBZONE\n\n\n\nFor Horizontal spacing, type 500.\nFor Vertical spacing, type 500.\nFor Grid CRS, make sure that EPSG 3414 is used.\n\nWhen you are ready to run the process,\n\nClick on Run button.\n\nRead the Log before closing the dialog window.\n\nClick on Close button.\n\nNotice that a new temporary layer called Grid is added on the Layer pane and display on Map window.\n\n\n3.1.1 Editing the hexagon layer\nUsing the Clipped function, intersect the Grid layer and MP19_SUBZONE layer.\nUsing Select features by polygon function as learnt in the previous section, select the area that falls under Singapore mainland. \n\nYour screen should look similar to the screenshot below.\n\n\n\n3.1.2 Saving the hexagon layer\nUsing the steps you had learned in previous sections, save the edited Grid layer into GeoPackage format. Name the layer hexagon.\nBefore you move on to the next section, remember to remove the temporary Grid layer.\n\n\n3.1.3  Computing hexagon centroid\nIn general, network analysis required the demand in a point feature. Hexagon, on the other hand, is a polygon feature. In order to meet the analysis need, we will compute the centroids of the hexagons.\n\nFrom the menu bar, select Vector → Geometry Tools → Centroids.\n\nCentroids dialog window appears.\n\nFor Input layer, select hexagon from the drop-down list.\n\nWhen you are ready to run the process,\n\nClick on Run button.\n\nReminder: Read the log before closing.\n\nClick on Close button.\n\nNotice that a new temporary layer called Centroids is added onto the Layers panel and display on Map view.\n\n\n\n3.1.4 Saving the centroid layer\nUsing the steps you had learned in previous hands-on exercise, save the temporary Centroids layer into GeoPackage format. Name the newly created layer hex_centroids .\nBefore you move on to the next section, remember to remove the temporary Centroids layer."
  },
  {
    "objectID": "methodology.html#network-accessibility-analysis",
    "href": "methodology.html#network-accessibility-analysis",
    "title": "Methodology - Step by Step Guide",
    "section": "3.2 Network Accessibility Analysis",
    "text": "3.2 Network Accessibility Analysis\n\n3.2.1 Install QNEAT Plugin\n\nFrom the menu bar, select Plugins → Manage and Install plugins. Plugins dialog window appears. \nAt the query, type QNEAT3. Notice that QNEAT3 appears on the search output list.\nClick on QNEAT3. \n\nClick on Install Plugin button. \n\n\nWhen the installation is completed, click on the Close button. \n\n\n3.2.2 Working with OD Matrix Tool\nNext, we will use the Origin-Destination Matrix (OD Matrix) tool of QNEAT3 plugin to calculate the distances between hexagon centrois (as the demand points) and primary schools (as the supply points).\n\nFrom the menu bar, click on Processing → Toolbox\nAt the Search pane, type OD Matrix.\n\nYour screen should look similar to the screenshot below.\n\n\nClick on OD Matrix Layers as Table (m:n).\n\nOD Matrix Layers as Table (m:n) dialog window appears.\n\nFor Network Layer, select motor_roads from the drop-down list.\nFor From-Point Layer, select hex_centroids from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select primary_schools from the drop-down list.\nFor Unique Point ID Field, select field_1 from the drop-down list.\nFor Optimization Criterion, select Shortest Path (distance optimization) from the drop-down list.\nFor Entry Cost calculation method, select Ellipsoidal from the drop-down list.\nFor Direction field, select oneway from the drop-down list.\nFor Value for forward direction, type F.\nFor Value for backward direction, type T.\nFor Value for both direction, type B.\nFor Topology tolerance, type 0.5 (i.e. 0.5 m).\n\nThe completed dialog window should look similar to the screenshot below.\n\nWhen you are ready to run the process.\n\nAt the OD Matrix dialog window, click on Run button.\n\nWhen you are ready to close the dialog window, click on the Close button.\nNotice that a new temporary table called Output OD Matrix is added onto Layers panel.\n\nAt the Layers panel, right-click on Output OD Matrix and select Open Attribute Table from the context menu.\n\nA data table that looks similar to the screenshot below appears.\n\n Using the steps learnt in previous sections, save the temporary Output OD Matrix table as GeoPackage format. Name the layer OD_primaryschools.\n\n\n3.2.3 Extracting shortest distance pairs\nNext, we will use the SQL tool of QGIS to select destination points with the shortest distance.\n\nAt the Search pane of Processing Toolbox, type SQL.\n\nSQL function appears on the list.\n\n\nDouble-click on Execute SQL of Vector general.\n\nExecute SQL dialog window appears.\n\nFor Additional input datasources, select on the button at the right end.\nClick on the checkbox Output OD Matrix.\n\n\n\nClick on OK button.\nAt SQL query panel, type the following SQL\n\n\n\nFor Geometry type, select No Geometry from the drop-down list.\n\n\nNotice that a temporary table called SQL Output is added onto Layers panel. It consists of four fields. The values in shortest_distance field are the shortest distance between demand points and its nearest primary school.\n\nUsing the steps you learnt in previous sections save the temporary SQL Output table as GeoPackage format. Name the layer acc_primaryschools.\nFor the SQL Output created from walking_roads, there will be several null values in the shortest_distance column that prevents us from joining this layer to the hexagon layer\nin the next step. To circumvent this, we will create a new column for shortest_distance that is type integer.\n\nRight-click on acc_primaryschools_walking_beforemerger → Open Attribute Table.\nClick on Create new field icon \n\nFor Output field name, type shortest_distance_new\nFor Output field type, select Decimal number (real)\n\n\nIn Expression panel, type shortest_distance\n\n\nClick OK button. A new column called  shortest_distance_new is created.\n\nRepeat the above steps for acc_primaryschools_aftermerger.\n\n\n3.2.4 Mapping Accessibility Values\n\n3.2.4.1 Creating a Duplicate Layer\nBefore we getting started, let us create a duplicate copy of hexagon layer\n\nAt the Layers panel, right-click on hexagon layer and select Duplicate Layer from the context menu.\n\nA new layer called hexagon copy is added onto Layers panel.\n\nRename the layer to Accessibility to primary schools.\n\n\n\n3.2.4.2 Performing relational join\nBefore we can prepare the choropleth map, we need to join acc_primaryschools data table to the newly created  Accessibility to primary schools by using fid of acc_primaryschools data table and fid of Accessibility to primary schools attribute table as unique join fields.\n\nAt the Layer panel, right-click on Accessibility to primary schools layer and select Properties from the context menu.\n\nThe Properties dialog window appears.\n\nAt the option panel, click on Joins.\nClick on + button to add a join.\n\nThe Add Vector Join dialog window appears.\n\nFor Join layer, select acc_primaryschools from th drop-down list.\nFor Join field, select fid from the drop-down list.\nFor Target field, select fid from the drop-down lsit.\nKeep the checkbox in front of Cache join layer in memory checked.\n\n\n\nWhen you are ready, click on OK button.\n\n\n\n3.2.4.3 Preparing Choropleth Map\nPrepare a choropleth map to show the distribution of accessibility to primary schools.\n\nFrom the Layers panel, double-click on the Accessibility to primary schools layer. The Layer Properties dialog window appears. \nClick on the Symbology tab. \nAt Symbol selection drop-down list, select Graduated from the drop-down list.\nFor Value, select access_primaryschools_shortest_distance from the drop down list.\nFor Classes, keep it as 5.\n For Color ramp, choose Blues or any colour of your choice from the drop-down  list.\n\nSelect Invert Color Ramp\n\nFor Mode, choose Equal Count (Quantile) from the drop-down list.\nClick on the Classify button. \n\nYour screen should look similar to the screenshot below.\n\nYour choropleth map should look similar to the screenshot below.\n\nRepeat the above steps to obtain choropleth maps for\n\nAccessibility to Primary Schools After Merger (Driving)\nAccessibility to Primary Schools Before Merger (Walking)\nAccessibility to Primary Schools After Merger (Walking)\n\nTo obtain b and c, under section 3.2.2.2, for Network Layer, select walking_roads from the drop-down list.\n\n\n3.2.4.4 Preparing Bivariate Choropleth Map\nWe will now create a bivariate choropleth map to compare the driving and walking accessibility to primary schools, both before and after the merger of schools. To do this,\n\nCreate a copy of the Accessibility to Primary Schools Before Merger (Driving) and  Accessibility to Primary Schools Before Merger (Walking). Right-click on the layer and select Duplicate layer\nFor Accessibility to Primary Schools Before Merger (Driving) layer, right-click → Properties → Symbology\n\nSelect Graduated\nFor Value, select acc_primaryschools_beforemerger_shortest_distance\nFor Classes\n\n<2km\n\nColor: #be64ac\nValues: 0-2000\n\n2-5km\n\nColor: #dfb0d6\nValues: 2000-5000\n\n>5km\n\nColor: #e8e8e8\nValues: 5000-52359.78\n\n\n\n\n\n\nFor Accessibility to Primary Schools BeforeMerger (Driving) layer, right-click → Properties → Symbology\n\nSelect Graduated\nFor Value, select acc_primaryschools_walking_beforemerger_shortest_distance_new\nFor Classes\n\n<1km\n\nColor: #5ac8c8\nValues: 0-1000\n\n2-5km\n\nColor: #ace4e4\nValues: 1000-2000\n\n>2km\n\nColor: #e8e8e8\nValues: 2000-53051\n\n\n\n\n\n\nFor Accessibility to Primary Schools Before Merger (Driving) layer, on Symbology page, click Layer Rendering\n\nFor Blending mode, select Multiply\n\nClick the OK button and close the window.\n\nA bivariate choropleth map will appear.\n\n\n\nTo create the bivariate legend, install the plugin called Bivariate Legend. Using the Bivariate legend, the parameters will be:\n\nTop layer: Accessibility to Primary Schools Before Merger (Driving) \nBottom layer: Accessibility to Primary Schools Before Merger (Walking) \nSquare width: 48\nMultiply\n\nClick Generate legend and Export legend to image, and save it as a .png file\nTo create the report, go to Project → New Print Layout. Create the print layout."
  },
  {
    "objectID": "methodology.html#network-accessibility-analysis---primary",
    "href": "methodology.html#network-accessibility-analysis---primary",
    "title": "Methodology - Step by Step Guide",
    "section": "3.2 Network Accessibility Analysis - Primary",
    "text": "3.2 Network Accessibility Analysis - Primary\n\n3.2.1 Install QNEAT Plugin\n\nFrom the menu bar, select Plugins → Manage and Install plugins. Plugins dialog window appears. \nAt the query, type QNEAT3. Notice that QNEAT3 appears on the search output list.\nClick on QNEAT3. \n\nClick on Install Plugin button. \n\n\nWhen the installation is completed, click on the Close button. \n\n\n3.2.2 Working with OD Matrix Tool\nNext, we will use the Origin-Destination Matrix (OD Matrix) tool of QNEAT3 plugin to calculate the distances between hexagon centrois (as the demand points) and primary schools (as the supply points).\n\nFrom the menu bar, click on Processing → Toolbox\nAt the Search pane, type OD Matrix.\n\nYour screen should look similar to the screenshot below.\n\n\nClick on OD Matrix Layers as Table (m:n).\n\nOD Matrix Layers as Table (m:n) dialog window appears.\n\nFor Network Layer, select motor_roads from the drop-down list.\nFor From-Point Layer, select hex_centroids from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select primary_schools from the drop-down list.\nFor Unique Point ID Field, select field_1 from the drop-down list.\nFor Optimization Criterion, select Shortest Path (distance optimization) from the drop-down list.\nFor Entry Cost calculation method, select Ellipsoidal from the drop-down list.\nFor Direction field, select oneway from the drop-down list.\nFor Value for forward direction, type F.\nFor Value for backward direction, type T.\nFor Value for both direction, type B.\nFor Topology tolerance, type 0.5 (i.e. 0.5 m).\n\nThe completed dialog window should look similar to the screenshot below.\n\nWhen you are ready to run the process.\n\nAt the OD Matrix dialog window, click on Run button.\n\nWhen you are ready to close the dialog window, click on the Close button.\nNotice that a new temporary table called Output OD Matrix is added onto Layers panel.\n\nAt the Layers panel, right-click on Output OD Matrix and select Open Attribute Table from the context menu.\n\nA data table that looks similar to the screenshot below appears.\n\n Using the steps learnt in previous sections, save the temporary Output OD Matrix table as GeoPackage format. Name the layer OD_primaryschools.\n\n\n3.2.3 Extracting shortest distance pairs\nNext, we will use the SQL tool of QGIS to select destination points with the shortest distance.\n\nAt the Search pane of Processing Toolbox, type SQL.\n\nSQL function appears on the list.\n\n\nDouble-click on Execute SQL of Vector general.\n\nExecute SQL dialog window appears.\n\nFor Additional input datasources, select on the button at the right end.\nClick on the checkbox Output OD Matrix.\n\n\n\nClick on OK button.\nAt SQL query panel, type the following SQL\n\n\n\nFor Geometry type, select No Geometry from the drop-down list.\n\n\nNotice that a temporary table called SQL Output is added onto Layers panel. It consists of four fields. The values in shortest_distance field are the shortest distance between demand points and its nearest primary school.\n\nUsing the steps you learnt in previous sections save the temporary SQL Output table as GeoPackage format. Name the layer acc_primaryschools.\nFor the SQL Output created from walking_roads, there will be several null values in the shortest_distance column that prevents us from joining this layer to the hexagon layer\nin the next step. To circumvent this, we will create a new column for shortest_distance that is type integer.\n\nRight-click on acc_primaryschools_walking_beforemerger → Open Attribute Table.\nClick on Create new field icon \n\nFor Output field name, type shortest_distance_new\nFor Output field type, select Decimal number (real)\n\n\nIn Expression panel, type shortest_distance\n\n\nClick OK button. A new column called  shortest_distance_new is created.\n\nRepeat the above steps for acc_primaryschools_aftermerger.\n\n\n3.2.4 Mapping Accessibility Values\n\n3.2.4.1 Creating a Duplicate Layer\nBefore we getting started, let us create a duplicate copy of hexagon layer\n\nAt the Layers panel, right-click on hexagon layer and select Duplicate Layer from the context menu.\n\nA new layer called hexagon copy is added onto Layers panel.\n\nRename the layer to Accessibility to primary schools.\n\n\n\n3.2.4.2 Performing relational join\nBefore we can prepare the choropleth map, we need to join acc_primaryschools data table to the newly created  Accessibility to primary schools by using fid of acc_primaryschools data table and fid of Accessibility to primary schools attribute table as unique join fields.\n\nAt the Layer panel, right-click on Accessibility to primary schools layer and select Properties from the context menu.\n\nThe Properties dialog window appears.\n\nAt the option panel, click on Joins.\nClick on + button to add a join.\n\nThe Add Vector Join dialog window appears.\n\nFor Join layer, select acc_primaryschools from th drop-down list.\nFor Join field, select fid from the drop-down list.\nFor Target field, select fid from the drop-down lsit.\nKeep the checkbox in front of Cache join layer in memory checked.\n\n\n\nWhen you are ready, click on OK button.\n\n\n\n3.2.4.3 Preparing Choropleth Map\nPrepare a choropleth map to show the distribution of accessibility to primary schools.\n\nFrom the Layers panel, double-click on the Accessibility to primary schools layer. The Layer Properties dialog window appears. \nClick on the Symbology tab. \nAt Symbol selection drop-down list, select Graduated from the drop-down list.\nFor Value, select access_primaryschools_shortest_distance from the drop down list.\nFor Classes, keep it as 5.\n For Color ramp, choose Blues or any colour of your choice from the drop-down  list.\n\nSelect Invert Color Ramp\n\nFor Mode, choose Equal Count (Quantile) from the drop-down list.\nClick on the Classify button. \n\nYour screen should look similar to the screenshot below.\n\nYour choropleth map should look similar to the screenshot below.\n\nRepeat the above steps to obtain choropleth maps for\n\nAccessibility to Primary Schools After Merger (Driving)\nAccessibility to Primary Schools Before Merger (Walking)\nAccessibility to Primary Schools After Merger (Walking)\n\nTo obtain b and c, under section 3.2.2.2, for Network Layer, select walking_roads from the drop-down list.\n\n\n3.2.4.4 Preparing Bivariate Choropleth Map\nWe will now create a bivariate choropleth map to compare the driving and walking accessibility to primary schools, both before and after the merger of schools. To do this,\n\nCreate a copy of the Accessibility to Primary Schools Before Merger (Driving) and  Accessibility to Primary Schools Before Merger (Walking). Right-click on the layer and select Duplicate layer\nFor Accessibility to Primary Schools Before Merger (Driving) layer, right-click → Properties → Symbology\n\nSelect Graduated\nFor Value, select acc_primaryschools_beforemerger_shortest_distance\nFor Classes\n\n<2km\n\nColor: #be64ac\nValues: 0-2000\n\n2-5km\n\nColor: #dfb0d6\nValues: 2000-5000\n\n>5km\n\nColor: #e8e8e8\nValues: 5000-52359.78\n\n\n\n\n\n\nFor Accessibility to Primary Schools BeforeMerger (Driving) layer, right-click → Properties → Symbology\n\nSelect Graduated\nFor Value, select acc_primaryschools_walking_beforemerger_shortest_distance_new\nFor Classes\n\n<1km\n\nColor: #5ac8c8\nValues: 0-1000\n\n2-5km\n\nColor: #ace4e4\nValues: 1000-2000\n\n>2km\n\nColor: #e8e8e8\nValues: 2000-53051\n\n\n\n\n\n\nFor Accessibility to Primary Schools Before Merger (Driving) layer, on Symbology page, click Layer Rendering\n\nFor Blending mode, select Multiply\n\nClick the OK button and close the window.\n\nA bivariate choropleth map will appear.\n\n\n\nTo create the bivariate legend, install the plugin called Bivariate Legend. Using the Bivariate legend, the parameters will be:\n\nTop layer: Accessibility to Primary Schools Before Merger (Driving) \nBottom layer: Accessibility to Primary Schools Before Merger (Walking) \nSquare width: 48\nMultiply\n\nClick Generate legend and Export legend to image, and save it as a .png file\nTo create the report, go to Project → New Print Layout. Create the print layout."
  },
  {
    "objectID": "methodology.html#geocode-the-prepared-data",
    "href": "methodology.html#geocode-the-prepared-data",
    "title": "Methodology - Step by Step Guide",
    "section": "4.2 Geocode the prepared data",
    "text": "4.2 Geocode the prepared data\n\nOpen MMQGIS → Geocode → Geocode CSV with Web Service\n\n\n\nNavigate to the singapore_secondary_schools.csv by clicking the button at the end of the bar under Input CSV File (UTF-8 )\n\n\nFor Address, select address from the dropdown list\nFor City, select City\nFor Country, select Country \nFor Web Service, select OpenStreetMap / Nominatim\nSave it in your geocoded file\n\n\n\nNow you may notice a layer called geocoded appears. Let us rename it to 'SecondarySchool'\nNavigate to the notfound file in your geocode folder. There are some schools that are not geocoded properly, and we need to manually find them on the map.\n\n\n\nNow click Browser → double click OpenStreetMap\n\n\n\nFor example, Bowen Secondary school is not geocoded properly, we can manually find it by using the OpenStreetMap by using its address.\n\n\n\nAfter you find Bowen Secondary School on Open Map, active and tick the SecondarySchool layer → right click and select Toggle Editing\n\n\n\nClick the Add Point Feature icon that is circled in red.\n\n\n\nFill in the necessary information according to your notfound.csv file\n\n\n\nRepeat the steps for the other school in the notfound.csv file, and open the attribute table. There should be 153 features. Save it into the Geopackage database."
  },
  {
    "objectID": "methodology.html#network-accessibility-analysis---secondary-walking-and-driving",
    "href": "methodology.html#network-accessibility-analysis---secondary-walking-and-driving",
    "title": "Methodology - Step by Step Guide",
    "section": "4.3 Network Accessibility Analysis - Secondary (Walking and Driving)",
    "text": "4.3 Network Accessibility Analysis - Secondary (Walking and Driving)\nThe logic for preparing maps including creating the hexagon layer and Network Accessibility Analysis are the same as demonstrated in the previous section. Follow the instructions from section 3.2 with secondary school before and after merger layers instead."
  },
  {
    "objectID": "methodology.html#network-accessibility-analysis---secondary-mrt",
    "href": "methodology.html#network-accessibility-analysis---secondary-mrt",
    "title": "Methodology - Step by Step Guide",
    "section": "4.4 Network Accessibility Analysis - Secondary (MRT)",
    "text": "4.4 Network Accessibility Analysis - Secondary (MRT)\n\n4.4.1 Data Preparation\n\nLoad theMRTLRTStnPt data from LTA data mall. Save it into GeoPackage as MRTstations_after_merger. \nLoad a second MRTLRTStnPtt layer. Open its attribute table and remove the following stations which were not open at the time of the mergers\n\nWoodlands North\nWoodlands South\nSpringleaf\nLentor\nMayflower\nBright Hill\nUpper Thompson\nCaldecott (On the Thompson East Coast Line side)\n\nSave it into GeoPackage as MRTstations_before_merger\n\n\n\nLoad in the gis_osm_railways from Geofabrik. Select all the MRT, LRT tracks using  “fclass” in ( ‘light_rail’ , ‘monorail’ , ‘rail’ , ‘subway’ )\n\n\n\nSave the selected features as MRT_after_merger\nCreate a duplicate of MRT_after_merger and call it MRT_before_merger. Delete the TEL from the layer (Highlighted in bright yellow)\n\n\n\n\n4.4.2 Extracting Shortest Distance from Hexagon Centroid to School via MRT\n\n4.4.2.1 OD Matrix for hex centroid to MRT stations\nPerform the same steps as in section 3.2.2, but with the following parameters changed:\n\nFor Network Layer, select pedestrian_roads from the drop-down list.\nFor From-Point Layer, select hex_centroids from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select MRTstations_before_merger from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\n\nSave this in GeoPackage as OD_Secondary_before_merger_MRT_walk\nRepeat the steps with MRTstations_after_merger to get OD_Secondary_after_merger_MRT_walk\n\n\n4.4.2.2 OD Matrix for MRT station to MRT station\nPerform the same steps as in section 3.2.2, but with the following parameters changed:\n\nFor Network Layer, select MRT_before_merger from the drop-down list.\nFor From-Point Layer, select MRTstations_before_merger from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select MRTstations_before_merger from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\n\nSave this in GeoPackage as OD_before_merger_MRT_travel\nRepeat the steps with MRT_after_merger and MRTstations_after_merger to get OD_after_merger_MRT_travel\n\n\n4.4.2.3 OD Matrix for MRT station to Secondary School\nPerform the same steps as in section 3.2.2, but with the following parameters changed:\n\nFor Network Layer, select pedestrian_roads from the drop-down list.\nFor From-Point Layer, select Secondary_before_merger from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\nFor To-Point Layer, select MRTstations_before_merger from the drop-down list.\nFor Unique Point ID Field, select fid from the drop-down list.\n\nSave this in GeoPackage as OD_before_merger_MRT-school\nRepeat the steps with Secondary_after_merger and MRTstations_after_merger to get OD_after_merger_MRT-school\n\n\n4.4.2.4 SQL to get accessibility\nRepeat steps 3.2.3 but with the following parameters changed:\n\nFor Additional input datasources, select OD_before_merger_MRT-school as input1 and OD_before_merger_MRT_travel\nEnter the following as the SQL query:\n\nselect min(input1.total_cost) as shortest_distance, input2.total_cost, input2.origin_id, input2.destination_id, input1.origin_id as school from input1, input2 where input1.destination_id = input2.destination_id group by input1.origin_id, input2.origin_id\n\nSave the output as before_merger_sql\nOpen execute SQL again\nFor Additional input datasources, select OD_Secondary_before_merger_MRT_walk as input1 and before_merger_sql as input2\nEnter the following SQL query:\n\nselect input1.origin_id as origin_id, input1.destination_id as origin_MRT, input2.destination_id as destination_MRT, input2.school as destination_id, min(input1.total_cost) as dist1, min(input2.total_cost) as dist2, input2.shortest_distance as dist3 from input1, input2 where input1.destination_id = input2.origin_id and input1.total_cost < 1000 group by input1.origin_id\n\nSave the output as acc_Secondary_before_merger_MRT\n\nRepeat the above steps with the after merger OD matrices.\n\n\n\n4.4.3 Mapping Accessibility Values\nRepeat the steps in section 3.2.4 to create chroropleth/ bivariate choropleth maps for Walking/ MRT/ Driving Accessibility maps for both Secondary Schools both before and after merger."
  },
  {
    "objectID": "methodology.html#data-preparation-2",
    "href": "methodology.html#data-preparation-2",
    "title": "Methodology - Step by Step Guide",
    "section": "5.1 Data Preparation",
    "text": "5.1 Data Preparation\n\nClean School Directory and Information file downloaded from General Information of Schools by keeping the column like shown below, filtering the mainlevel_code with the value of JUNIOR COLLEGE and MIXED_LEVEL.\nCarefully check each school labelled with mixed_level, and remove schools that do not include Junior Colleges or are special schools, for example Singapore Sports School and School of the Arts, save it into the Data folder and name it JC_After_Mergers.\n\n\n\nDuplicate the file and change the following schools:\n\nAnderson Serangoon → Anderson\nJurong Pioneer → Pioneer\nTampines Meridian → Meridian\nYishun Innova → Yishun\nAdd Serangoon Junior College → 1033 Upper Serangoon Road\nAdd Jurong Junior College → 800 Corporation Road\nAdd Tampines Junior College → 2 Tampines Avenue 9\nAdd Innova Junior College → 21 Champions Way\n\nSave this file in the Data folder and name it JC_Before_Mergers."
  },
  {
    "objectID": "methodology.html#geocoding",
    "href": "methodology.html#geocoding",
    "title": "Methodology - Step by Step Guide",
    "section": "5.2 Geocoding",
    "text": "5.2 Geocoding\n\nOpen MMQGIS → Geocode → Geocode CSV with Web Service\n\n\n\n\nNavigate to the JC_before_mergers.csv by clicking the button at the end of the bar under Input CSV File (UTF-8 )\n\n\nFor Address, select address from the dropdown list\nFor City, select City\nFor Country, select Country \nFor Web Service, select OpenStreetMap / Nominatim\nSave it in your geocoded file\n\n\n\nNow you may notice a layer called geocoded appears. Let us rename it to 'JC_before_merger'\nNavigate to the notfound file in your geocode folder. There are some schools that are not geocoded properly, and we need to manually find them on the map.\n\n\n\nNow click Browser -> double click OpenStreetMap\n\n\n\nFor example, Dunman High School is not geocoded properly. We can manually find it by using the OpenStreetMap by using its address.\n\n\n\nAfter you find Dunman High School on Open Map, active and tick the JC_before_merger layer, right click and select Toggle Editing.\n\n\n\nClick the Add Point Feature icon that is circled in red\n\n\n\nFill in the necessary information according to your notfound.csv file\n\n\n\nRepeat the steps for the other schools in the notfound.csv file, now open the attribute table, there should be 20 features, now save it into the Geopackage database\n\n\n\nRepeat the steps for JC_after_merger as well. You should end up with 16 features."
  }
]